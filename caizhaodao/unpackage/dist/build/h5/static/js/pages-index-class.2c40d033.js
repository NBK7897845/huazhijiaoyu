(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-index-class"],{"3ed0":function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,'@charset "UTF-8";\n/**\r\n * 这里是uni-app内置的常用样式变量\r\n *\r\n * uni-app 官方扩展插件及插件市场（https://ext.dcloud.net.cn）上很多三方插件均使用了这些样式变量\r\n * 如果你是插件开发者，建议你使用scss预处理，并在插件代码中直接使用这些变量（无需 import 这个文件），方便用户通过搭积木的方式开发整体风格一致的App\r\n *\r\n */\n/**\r\n * 如果你是App开发者（插件使用者），你可以通过修改这些变量来定制自己的插件主题，实现自定义主题功能\r\n *\r\n * 如果你的项目同样使用了scss预处理，你也可以直接在你的 scss 代码中使用如下变量，同时无需 import 这个文件\r\n */\n/* 颜色变量 */\n/* 行为相关颜色 */\n/* 文字基本颜色 */\n/* 背景颜色 */\n/* 边框颜色 */\n/* 尺寸变量 */\n/* 文字尺寸 */\n/* 图片尺寸 */\n/* Border Radius */\n/* 水平间距 */\n/* 垂直间距 */\n/* 透明度 */\n/* 文章场景相关 */uni-rich-text img[data-v-7bb35fa4]{max-width:100%!important}.page[data-v-7bb35fa4]{overflow:hidden}.container[data-v-7bb35fa4]{position:fixed;top:%?88?%;height:%?400?%;width:100%;z-index:9}uni-video[data-v-7bb35fa4]{width:100%;height:%?400?%}.present[data-v-7bb35fa4]{padding:%?30?%;background:#fff;margin-top:%?400?%;position:relative}.present .fenxiang[data-v-7bb35fa4]{float:right;width:%?30?%;height:%?30?%}.zhuanfa[data-v-7bb35fa4]{position:absolute;right:%?-240?%;top:0;width:%?30?%;height:%?30?%;opacity:0}.p-name[data-v-7bb35fa4]{margin-bottom:%?30?%;font-size:%?35?%;color:#1d1d1d}.title[data-v-7bb35fa4]{margin-bottom:%?30?%}.p-name uni-view[data-v-7bb35fa4]{display:inline-block;font-size:%?25?%;color:#fff;line-height:%?35?%;border-radius:%?18?%;background:#106efa;height:%?35?%;width:%?90?%;text-align:center;margin-left:%?20?%}.p-title[data-v-7bb35fa4]{position:relative}.p-title .p-text[data-v-7bb35fa4]{width:%?500?%;height:%?80?%;font-size:%?25?%;font-weight:400;color:#848484;line-height:%?40?%;display:-webkit-box;-webkit-box-orient:vertical;-webkit-line-clamp:2;overflow:hidden}.pingfen[data-v-7bb35fa4]{float:right;text-align:right}.qiexian[data-v-7bb35fa4]{position:absolute;height:%?50?%;width:1px;right:%?120?%;top:%?15?%;background:#e3e3e3}.p-info[data-v-7bb35fa4]{position:relative;color:#b8b8b8;font-size:%?23?%;margin-top:%?30?%}.tab[data-v-7bb35fa4]{margin-top:%?20?%;background:#fff;overflow:hidden}.t-name[data-v-7bb35fa4]{float:left;width:33%;height:%?100?%;line-height:%?100?%;font-size:%?30?%;text-align:center}.t-name uni-view[data-v-7bb35fa4]{position:relative;top:-3px;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);width:%?40?%;height:3px;background:#106efa;border-radius:1.5px}.footer[data-v-7bb35fa4]{padding:%?30?%;margin-top:1px;background:#fff}.down[data-v-7bb35fa4]{display:none}.click[data-v-7bb35fa4]{font-weight:700}.p-top uni-image[data-v-7bb35fa4]{width:%?70?%;height:%?70?%;border-radius:50%;float:left}.pl-info[data-v-7bb35fa4]{margin-left:%?90?%;font-size:%?30?%}.pl-info .pl-name[data-v-7bb35fa4]{color:#181818}.pl-info .pl-day[data-v-7bb35fa4]{color:#a2a2a2;font-size:%?25?%}.p-punlun[data-v-7bb35fa4]{font-size:%?25?%;color:#444;line-height:%?36?%;margin:%?40?% 0 %?10?%}.towhite[data-v-7bb35fa4]{position:fixed;bottom:%?30?%;width:%?690?%;left:50%;-webkit-transform:translate(-50%);transform:translate(-50%);background:#106efa;text-align:center;font-size:%?35?%;height:%?100?%;color:#fff;border-radius:%?50?%;line-height:%?100?%}.query[data-v-7bb35fa4]{margin-bottom:%?20?%}.query-name[data-v-7bb35fa4]{font-size:%?30?%}.query-item[data-v-7bb35fa4]{margin:%?20?% 0;line-height:%?50?%;padding-left:%?40?%;background-image:url(http://39.98.47.251:91/upload/xcximg/bg4.png);color:#666;background-position:0;background-repeat:no-repeat}.error[data-v-7bb35fa4]{background-image:url(http://39.98.47.251:91/upload/xcximg/bg3.png);background-position:0;background-repeat:no-repeat}.success[data-v-7bb35fa4]{background-image:url(http://39.98.47.251:91/upload/xcximg/bg2.png);background-position:0;background-repeat:no-repeat}.query-sel[data-v-7bb35fa4]{background:#ccc;height:%?30?%;width:%?30?%;border-radius:50%;margin-right:%?10?%;margin-left:%?10?%}.query-click[data-v-7bb35fa4]{background:#106efa}.query+.query[data-v-7bb35fa4]{padding-top:%?30?%}.query-false[data-v-7bb35fa4]{background:red}.query-true[data-v-7bb35fa4]{background:#04f570}.info[data-v-7bb35fa4]{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2000}.Shading[data-v-7bb35fa4]{width:100%;height:100%;background:#000;opacity:.4;position:relative}.infotxt[data-v-7bb35fa4]{position:absolute;width:%?500?%;height:%?420?%;top:10%;right:0;left:0;bottom:0;margin:auto;background:#fff;z-index:1002;border-radius:%?7?%;text-align:center}.infotxt uni-textarea[data-v-7bb35fa4]{text-align:left;width:%?460?%;background:#e3e3e3;margin:%?20?%}.infobutton[data-v-7bb35fa4]{width:%?300?%;height:%?70?%;background:#638ca1;font-size:%?30?%;line-height:%?70?%;color:#fff;margin-left:%?100?%}',""])},"3f1f":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("e814")),s=a(e("f499"));e("ac6a");var o=a(e("5d73")),r={data:function(){return{class_id:"",user_token:"",classInfo:{},watchrecord:"",motto:"Hello World",page:1,pagesize:20,total:0,Videoupdat:0,videoTime:0,thatTime:0,videoContext:"",proportion:0,userInfo:{},hasUserInfo:!1,canIUse:wx.canIUse("button.open-type.getUserInfo"),tabList:[{id:1,text:"课程简介",to:""},{id:2,text:"课程评论",to:""},{id:3,text:"课程试卷",to:""}],tabClick:0,answer:[],questionWhite:!1,writePinlun:!1,getpinLunbol:!1,getshitibol:!1,pinlunList:[],textareaValue:"",questionList:[]}},created:function(){},onReachBottom:function(){if(console.log("上拉"),this.total&&1==this.tabClick){if(this.page*this.pagesize>this.total)return this.$msg("没有更多数据了"),!1;this.page++,this.getPinlun()}},onLoad:function(t){var i=this;uni.getStorage({key:"user_token",success:function(t){console.log(t),i.user_token=t.data}}),this.class_id=t.class_id,this.videoContext=uni.createVideoContext("myVideo"),this.getClassInfo()},onShow:function(){console.log("onShow")},onUnload:function(){this.watchrecord?0==this.watchrecord.is_finish&&this.changeLength(0):this.changeLength(0)},methods:{vidoePlay:function(){},videoEnd:function(t){if(this.watchrecord&&1==this.watchrecord.is_finish)return!1;var i=this.videoTime-this.Videoupdat;console.log(i),i>3?(this.videoContext.play(),this.videoContext.seek(this.Videoupdat),this.$msg("请认真看完视频")):this.changeLength(1)},textareaChange:function(t){this.textareaValue=t.detail.value},tabChange:function(t){var i=this;1==t&&0==i.getpinLunbol&&i.getPinlun(),2==t&&0==i.getshitibol&&i.getshiti(),this.tabClick=t},answerSelected:function(t,i){var e=this.questionList,a=e[t],n=this.answer;console.log(t,i,a);for(var s=0;s<e.length;s++)!(n[s]>0)&&(n[s]=0);var r=!0,c=!1,l=void 0;try{for(var d,u=(0,o.default)(a.options);!(r=(d=u.next()).done);r=!0){var f=d.value;f.selected=!1}}catch(h){c=!0,l=h}finally{try{r||null==u.return||u.return()}finally{if(c)throw l}}a.options[i].selected=!0,n[t]=a.options[i].power,console.log(n),e[t]=a,this.questionList=e.splice(0),this.answer=n,console.log(this.questionList)},querySubmit:function(){var t=this;this.watchrecord&&0!=this.watchrecord.is_finish||this.$msg("视频看完后才能提交答案");var i=this.answer.every(function(t){return console.log(t),t>0}),e=this.answer;if(i){var a=this.questionList;console.log(a),a.forEach(function(t,i){t.select=e[i]}),this.questionList=a,this.questionWhite=!0,console.log(a),console.log((0,s.default)(a)),uni.request({url:this.$url+"api/doexam/addcredit"+this.user_token+"&strings="+(0,s.default)(a),method:"post",data:{},success:function(i){console.log(i),1e4==i.data.code?(t.questionList=JSON.parse(i.data.data),t.questionWhite=!0):t.$msg(i.data.msg)}})}else this.$msg("请答完所有试题")},infohide:function(){this.writePinlun=!this.writePinlun},getVideoupdate:function(t){if(this.watchrecord&&1==this.watchrecord.is_finish)return!1;var i=t.detail.currentTime-this.Videoupdat;i>3?(this.videoContext.seek(this.Videoupdat),this.$msg("请认真观看视频")):(this.Videoupdat=t.detail.currentTime,this.videoTime=t.detail.duration,this.thatTime=(0,n.default)(t.detail.currentTime),this.proportion=(t.detail.currentTime/t.detail.duration*100).toFixed(2))},getClassInfo:function(){var t=this;uni.request({url:this.$url+"api/classes/info"+this.user_token+"&class_id="+this.class_id,method:"post",data:{},success:function(i){if(console.log(i,"视频信息"),1e4==i.data.code){t.classInfo=i.data.data,t.watchrecord=i.data.watchrecord;var e=t.watchrecord;e&&0==e.is_finish&&(t.Videoupdat=e.video_length,t.videoContext.seek(e.video_length),setTimeout(function(){t.videoContext.play()},500))}else t.$msg(i.data.msg)}})},changeLength:function(t){var i=this;uni.request({url:this.$url+"api/classesin/save"+this.user_token+"&class_id="+this.class_id+"&video_length="+this.Videoupdat+"&is_finish="+t,method:"post",data:{},success:function(e){console.log(e),1e4==e.data.code&&(i.watchrecord={is_finish:t})}})},getPinlun:function(){var t=this;uni.request({url:this.$url+"api/comment/info"+this.user_token+"&class_id="+this.class_id+"&page="+this.page+"&num="+this.pagesize,method:"post",data:{},success:function(i){console.log(i),1e4==i.data.code?(t.pinlunList=i.data.data.list,t.getpinLunbol=!0):t.$msg(i.data.msg)}})},writeSubmit:function(){var t=this;uni.request({url:this.$url+"api/comment/add"+this.user_token+"&class_id="+this.class_id+"&comment="+this.textareaValue,method:"post",data:{},success:function(i){console.log(i),1e4==i.data.code&&(t.infohide(),t.getPinlun()),t.$msg(i.data.msg)}})},getshiti:function(){var t=this;uni.request({url:this.$url+"api/exam/getexaminfo"+this.user_token+"&class_id="+this.class_id,method:"post",data:{},success:function(i){if(console.log(i),1e4==i.data.code)if(t.watchrecord&&0!=t.watchrecord.is_finish||t.$msg("视频看完后才能提交答案"),"unanswered"==i.data.status){var e=i.data.data;console.log(e),e.forEach(function(i){i.options=JSON.parse(i.options),i.select=0,i.type=1,t.answer.push(0)}),t.questionList=e}else{var a=i.data.data.options;t.questionList=JSON.parse(a),t.questionWhite=!0}else t.$msg(i.data.msg)}})}}};i.default=r},4006:function(t,i,e){"use strict";var a=e("4f50"),n=e.n(a);n.a},"469f":function(t,i,e){e("6c1c"),e("1654"),t.exports=e("7d7b")},"4f50":function(t,i,e){var a=e("3ed0");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("74dbd659",a,!0,{sourceMap:!1,shadowMode:!1})},"5d73":function(t,i,e){t.exports=e("469f")},"7d7b":function(t,i,e){var a=e("e4ae"),n=e("7cd6");t.exports=e("584a").getIterator=function(t){var i=n(t);if("function"!=typeof i)throw TypeError(t+" is not iterable!");return a(i.call(t))}},"8bf0":function(t,i,e){"use strict";var a,n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"page"},[e("v-uni-view",{staticClass:"container"},[e("v-uni-video",{attrs:{id:"myVideo",src:t.classInfo.video_url,"initial-time":"0"},on:{timeupdate:function(i){arguments[0]=i=t.$handleEvent(i),t.getVideoupdate.apply(void 0,arguments)},ended:function(i){arguments[0]=i=t.$handleEvent(i),t.videoEnd.apply(void 0,arguments)},play:function(i){arguments[0]=i=t.$handleEvent(i),t.vidoePlay.apply(void 0,arguments)}}})],1),e("v-uni-view",{staticClass:"present"},[e("v-uni-view",{staticClass:"p-name"},[t._v(t._s(t.classInfo.class_name)),e("v-uni-view",[t._v(t._s(1==t.classInfo.describe?"会员":"免费"))])],1),e("v-uni-view",{staticClass:"p-title"},[e("v-uni-view",{staticClass:"pingfen"},[e("v-uni-view",{staticStyle:{"font-size":"35rpx",color:"#106EFA","text-align":"center"}},[t._v(t._s(t.classInfo.video_scores))]),e("v-uni-view",{staticStyle:{"font-size":"25rpx",color:"#5E5E5E"}},[t._v("学分")])],1),e("v-uni-view",{staticClass:"qiexian"}),e("v-uni-view",{staticClass:"p-text"},[t._v(t._s(t.classInfo.describe))])],1),e("v-uni-view",{staticClass:"p-info"},[e("v-uni-view",{staticClass:"qiexian",staticStyle:{height:"22rpx",left:"170rpx",top:"5rpx"}}),e("v-uni-view",[t._v("时长"+t._s(t.classInfo.video_length)),e("v-uni-text",{staticStyle:{"margin-left":"100rpx"}},[t._v("已有"+t._s(t.classInfo.watchnums||0)+"人观看过")])],1)],1)],1),e("v-uni-view",{staticClass:"tab"},t._l(t.tabList,function(i,a){return e("v-uni-view",{key:a,staticClass:"t-name",class:{click:t.tabClick==a},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.tabChange(a)}}},[t._v(t._s(i.text)),e("v-uni-view",{class:{down:t.tabClick!=a}})],1)}),1),e("v-uni-view",{staticClass:"footer"},[e("v-uni-view",{staticClass:"jianjie",class:{down:0!=t.tabClick}},[e("v-uni-rich-text",{attrs:{nodes:t.classInfo.details}})],1),e("v-uni-view",{staticClass:"pinglun",class:{down:1!=t.tabClick}},[t._l(t.pinlunList,function(i,a){return e("v-uni-view",{key:a,staticClass:"title"},[e("v-uni-view",{staticClass:"p-top"},[e("v-uni-image",{attrs:{src:i.headerimg,mode:"aspectFill"}}),e("v-uni-view",{staticClass:"pl-info"},[e("v-uni-view",{staticClass:"pl-name"},[t._v(t._s(i.nickname))]),e("v-uni-view",{staticClass:"pl-day"},[t._v(t._s(i.show_time))])],1)],1),e("v-uni-view",{staticClass:"p-punlun"},[t._v(t._s(i.comment))])],1)}),t.pinlunList.length<1?e("v-uni-view",{staticStyle:{"text-align":"center","font-size":"30rpx",color:"#C8C7CC"}},[t._v("还没有评论")]):t._e(),e("v-uni-view",{staticStyle:{height:"150rpx"}}),e("v-uni-view",{staticClass:"towhite",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.infohide.apply(void 0,arguments)}}},[t._v("我要评论")])],2),e("v-uni-view",{staticClass:"xuanze",class:{down:2!=t.tabClick}},[t.questionList.length>0?e("v-uni-view",{},[t.questionWhite?e("v-uni-view",t._l(t.questionList,function(i,a){return e("v-uni-view",{key:a,staticClass:"query"},[e("v-uni-text",{staticClass:"query-name"},[t._v(t._s(1*a+1)+". "+t._s(i.title)+"("+t._s(i.set_score)+"分)")]),t._l(i.options,function(a,n){return e("v-uni-view",{key:n,staticClass:"query-item",class:{error:i.select==a.power,success:i.answer==a.power}},[e("v-uni-text",[t._v(t._s(0==n?"A":1==n?"B":2==n?"C":"D")+"、"+t._s(a.quest))])],1)})],2)}),1):e("v-uni-view",[t._l(t.questionList,function(i,a){return e("v-uni-view",{key:a,staticClass:"query"},[e("v-uni-text",{staticClass:"query-name"},[t._v(t._s(1*a+1)+". "+t._s(i.title)+"("+t._s(i.set_score)+"分)")]),t._l(i.options,function(i,n){return e("v-uni-view",{key:n,staticClass:"query-item",class:{success:i.selected},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.answerSelected(a,n)}}},[t._v(t._s(0==n?"A":1==n?"B":2==n?"C":"D")+"、"+t._s(i.quest))])})],2)}),e("v-uni-view",{staticStyle:{height:"150rpx"}}),e("v-uni-view",{staticClass:"towhite",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.querySubmit.apply(void 0,arguments)}}},[t._v("提交答案")])],2)],1):e("v-uni-view",{staticStyle:{"text-align":"center","font-size":"30rpx",color:"#C8C7CC"}},[t._v("该课程没有试题")])],1)],1),t.writePinlun?e("v-uni-view",{staticClass:"info"},[e("v-uni-view",{staticClass:"Shading",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.infohide.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"infotxt"},[e("v-uni-textarea",{attrs:{placeholder:"请输入"},on:{input:function(i){arguments[0]=i=t.$handleEvent(i),t.textareaChange.apply(void 0,arguments)}}}),e("v-uni-view",{staticClass:"infobutton",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.writeSubmit.apply(void 0,arguments)}}},[t._v("发布")])],1)],1):t._e()],1)},s=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return s}),e.d(i,"a",function(){return a})},a06c:function(t,i,e){"use strict";e.r(i);var a=e("3f1f"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);i["default"]=n.a},e481:function(t,i,e){"use strict";e.r(i);var a=e("8bf0"),n=e("a06c");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("4006");var o,r=e("f0c5"),c=Object(r["a"])(n["default"],a["b"],a["c"],!1,null,"7bb35fa4",null,!1,a["a"],o);i["default"]=c.exports}}]);